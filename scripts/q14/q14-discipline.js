//data

var dataset = [
    {
        "key": "Health Sciences",
        "values": [
            {
                x: "Name published alongside paper",
                y: 182
  },
            {
                x: "Signed report publicized with paper",
                y: 66
  },
            {
                x: "Acknowledgement in the journal",
                y: 372
  },
            {
                x: "Acknowledgement on journal's website",
                y: 304
  },
            {
                x: "Thankyou note from editor",
                y: 254
  },
            {
                x: "CME Accreditation/CPD points",
                y: 206
  },
            {
                x: "Credit on 3rd party site",
                y: 159
  },
            {
                x: "Certificate from  journal",
                y: 407
  },
            {
                x: "Payment in-kind by the journal",
                y: 116
  },
            {
                x: "Cash payment",
                y: 150
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 71
  },
            {
                x: "Book discount",
                y: 96
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 231
  },
            {
                x: "Discount/waiver on publication charges",
                y: 180
  },
            {
                x: "Reviewer web badges ",
                y: 160
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 192
  },
            {
                x: "Personal access to journal content",
                y: 366
  },
            {
                x: "Reviewer of the year award",
                y: 239
  },
            {
                x: "'Top reviewer' web badges",
                y: 241
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 434
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 413
  },
            {
                x: "Visibility of other reviewer reports",
                y: 331
  },
            {
                x: "Review history metrics",
                y: 211
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 213
  }],
},
    {
        "key": "Life Sciences",
        "values": [
            {
                x: "Name published alongside paper",
                y: 160
  },
            {
                x: "Signed report publicized with paper",
                y: 56
  },
            {
                x: "Acknowledgement in the journal",
                y: 294
  },
            {
                x: "Acknowledgement on journal's website",
                y: 322
  },
            {
                x: "Thankyou note from editor",
                y: 286
  },
            {
                x: "CME Accreditation/CPD points",
                y: 115
  },
            {
                x: "Credit on 3rd party site",
                y: 175
  },
            {
                x: "Certificate from  journal",
                y: 414
  },
            {
                x: "Payment in-kind by the journal",
                y: 135
  },
            {
                x: "Cash payment",
                y: 182
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 74
  },
            {
                x: "Book discount",
                y: 142
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 275
  },
            {
                x: "Discount/waiver on publication charges",
                y: 266
  },
            {
                x: "Reviewer web badges ",
                y: 149
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 195
  },
            {
                x: "Personal access to journal content",
                y: 365
  },
            {
                x: "Reviewer of the year award",
                y: 244
  },
            {
                x: "'Top reviewer' web badges",
                y: 221
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 419
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 439
  },
            {
                x: "Visibility of other reviewer reports",
                y: 328
  },
            {
                x: "Review history metrics",
                y: 196
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 189
  }],
},
    {
        "key": "Physical Sciences",
        "values": [
            {
                x: "Name published alongside paper",
                y: 117
  },
            {
                x: "Signed report publicized with paper",
                y: 55
  },
            {
                x: "Acknowledgement in the journal",
                y: 250
  },
            {
                x: "Acknowledgement on journal's website",
                y: 251
  },
            {
                x: "Thankyou note from editor",
                y: 295
  },
            {
                x: "CME Accreditation/CPD points",
                y: 89
  },
            {
                x: "Credit on 3rd party site",
                y: 136
  },
            {
                x: "Certificate from  journal",
                y: 418
  },
            {
                x: "Payment in-kind by the journal",
                y: 121
  },
            {
                x: "Cash payment",
                y: 153
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 55
  },
            {
                x: "Book discount",
                y: 128
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 169
  },
            {
                x: "Discount/waiver on publication charges",
                y: 189
  },
            {
                x: "Reviewer web badges ",
                y: 149
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 206
  },
            {
                x: "Personal access to journal content",
                y: 315
  },
            {
                x: "Reviewer of the year award",
                y: 294
  },
            {
                x: "'Top reviewer' web badges",
                y: 218
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 383
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 347
  },
            {
                x: "Visibility of other reviewer reports",
                y: 283
  },
            {
                x: "Review history metrics",
                y: 178
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 168
  }],
},
    {
        "key": "Social Sciences and Humanities",
        "values": [
            {
                x: "Name published alongside paper",
                y: 102
  },
            {
                x: "Signed report publicized with paper",
                y: 40
  },
            {
                x: "Acknowledgement in the journal",
                y: 262
  },
            {
                x: "Acknowledgement on journal's website",
                y: 215
  },
            {
                x: "Thankyou note from editor",
                y: 179
  },
            {
                x: "CME Accreditation/CPD points",
                y: 66
  },
            {
                x: "Credit on 3rd party site",
                y: 100
  },
            {
                x: "Certificate from  journal",
                y: 199
  },
            {
                x: "Payment in-kind by the journal",
                y: 108
  },
            {
                x: "Cash payment",
                y: 168
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 57
  },
            {
                x: "Book discount",
                y: 131
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 142
  },
            {
                x: "Discount/waiver on publication charges",
                y: 79
  },
            {
                x: "Reviewer web badges ",
                y: 102
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 142
  },
            {
                x: "Personal access to journal content",
                y: 220
  },
            {
                x: "Reviewer of the year award",
                y: 156
  },
            {
                x: "'Top reviewer' web badges",
                y: 138
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 276
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 317
  },
            {
                x: "Visibility of other reviewer reports",
                y: 225
  },
            {
                x: "Review history metrics",
                y: 107
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 118
  }]
}
];

console.log(dataset);

nv.addGraph(function () {
    var chart = nv.models.multiBarHorizontalChart()
        .showControls(true) //Allow user to switch between 'Grouped' and 'Stacked' mode.
        .groupSpacing(0.2) //Distance between each group of bars.
        .color(["#F2BA49", "#855199", "#648FD8", "#92CB9C", "#D22938", "#075B81"])
        .height(900)
        .margin({
            top: 30,
            right: 20,
            bottom: 0,
            left: 280
        });

    chart.legend.vers('furious');

    //chart.xAxis
    //.tickFormat(d3.format(',f'));

    chart.yAxis
        .tickFormat(d3.format(',1f'))
        .axisLabel('Responses');

    d3.select('#chart1 svg')
        .datum(dataset)
        .call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
});