//data

var dataset = [
    {
        "key": "University or College",
        "values": [
            {
                x: "Name published alongside paper",
                y: 309
  },
            {
                x: "Signed report publicized with paper",
                y: 125
  },
            {
                x: "Acknowledgement in the journal",
                y: 714
  },
            {
                x: "Acknowledgement on journal's website",
                y: 671
  },
            {
                x: "Thankyou note from editor",
                y: 625
  },
            {
                x: "CME Accreditation/CPD points",
                y: 259
  },
            {
                x: "Credit on 3rd party site",
                y: 348
  },
            {
                x: "Certificate from  journal",
                y: 865
  },
            {
                x: "Payment in-kind by the journal",
                y: 303
  },
            {
                x: "Cash payment",
                y: 419
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 150
  },
            {
                x: "Book discount",
                y: 313
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 519
  },
            {
                x: "Discount/waiver on publication charges",
                y: 419
  },
            {
                x: "Reviewer web badges ",
                y: 337
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 440
  },
            {
                x: "Personal access to journal content",
                y: 724
  },
            {
                x: "Reviewer of the year award",
                y: 592
  },
            {
                x: "'Top reviewer' web badges",
                y: 500
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 894
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 922
  },
            {
                x: "Visibility of other reviewer reports",
                y: 703
  },
            {
                x: "Review history metrics",
                y: 414
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 392
  }],
},
    {
        "key": "Research Institution",
        "values": [
            {
                x: "Name published alongside paper",
                y: 110
  },
            {
                x: "Signed report publicized with paper",
                y: 50
  },
            {
                x: "Acknowledgement in the journal",
                y: 205
  },
            {
                x: "Acknowledgement on journal's website",
                y: 211
  },
            {
                x: "Thankyou note from editor",
                y: 200
  },
            {
                x: "CME Accreditation/CPD points",
                y: 80
  },
            {
                x: "Credit on 3rd party site",
                y: 107
  },
            {
                x: "Certificate from  journal",
                y: 291
  },
            {
                x: "Payment in-kind by the journal",
                y: 102
  },
            {
                x: "Cash payment",
                y: 120
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 55
  },
            {
                x: "Book discount",
                y: 93
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 146
  },
            {
                x: "Discount/waiver on publication charges",
                y: 167
  },
            {
                x: "Reviewer web badges ",
                y: 104
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 140
  },
            {
                x: "Personal access to journal content",
                y: 258
  },
            {
                x: "Reviewer of the year award",
                y: 185
  },
            {
                x: "'Top reviewer' web badges",
                y: 146
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 296
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 277
  },
            {
                x: "Visibility of other reviewer reports",
                y: 214
  },
            {
                x: "Review history metrics",
                y: 122
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 127
  }],
},
    {
        "key": "Healthcare",
        "values": [
            {
                x: "Name published alongside paper",
                y: 73
  },
            {
                x: "Signed report publicized with paper",
                y: 24
  },
            {
                x: "Acknowledgement in the journal",
                y: 134
  },
            {
                x: "Acknowledgement on journal's website",
                y: 88
  },
            {
                x: "Thankyou note from editor",
                y: 79
  },
            {
                x: "CME Accreditation/CPD points",
                y: 89
  },
            {
                x: "Credit on 3rd party site",
                y: 55
  },
            {
                x: "Certificate from  journal",
                y: 137
  },
            {
                x: "Payment in-kind by the journal",
                y: 27
  },
            {
                x: "Cash payment",
                y: 51
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 25
  },
            {
                x: "Book discount",
                y: 28
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 73
  },
            {
                x: "Discount/waiver on publication charges",
                y: 62
  },
            {
                x: "Reviewer web badges ",
                y: 45
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 70
  },
            {
                x: "Personal access to journal content",
                y: 135
  },
            {
                x: "Reviewer of the year award",
                y: 69
  },
            {
                x: "'Top reviewer' web badges",
                y: 80
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 154
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 154
  },
            {
                x: "Visibility of other reviewer reports",
                y: 128
  },
            {
                x: "Review history metrics",
                y: 74
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 79
  }],
},
    {
        "key": "Government Organisation",
        "values": [
            {
                x: "Name published alongside paper",
                y: 20
  },
            {
                x: "Signed report publicized with paper",
                y: 6
  },
            {
                x: "Acknowledgement in the journal",
                y: 37
  },
            {
                x: "Acknowledgement on journal's website",
                y: 40
  },
            {
                x: "Thankyou note from editor",
                y: 29
  },
            {
                x: "CME Accreditation/CPD points",
                y: 12
  },
            {
                x: "Credit on 3rd party site",
                y: 20
  },
            {
                x: "Certificate from  journal",
                y: 47
  },
            {
                x: "Payment in-kind by the journal",
                y: 15
  },
            {
                x: "Cash payment",
                y: 19
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 9
  },
            {
                x: "Book discount",
                y: 18
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 29
  },
            {
                x: "Discount/waiver on publication charges",
                y: 24
  },
            {
                x: "Reviewer web badges ",
                y: 21
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 18
  },
            {
                x: "Personal access to journal content",
                y: 42
  },
            {
                x: "Reviewer of the year award",
                y: 32
  },
            {
                x: "'Top reviewer' web badges",
                y: 30
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 57
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 60
  },
            {
                x: "Visibility of other reviewer reports",
                y: 37
  },
            {
                x: "Review history metrics",
                y: 23
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 26
  }],
},
    {
        "key": "Other",
        "values": [
            {
                x: "Name published alongside paper",
                y: 38
  },
            {
                x: "Signed report publicized with paper",
                y: 8
  },
            {
                x: "Acknowledgement in the journal",
                y: 73
  },
            {
                x: "Acknowledgement on journal's website",
                y: 68
  },
            {
                x: "Thankyou note from editor",
                y: 70
  },
            {
                x: "CME Accreditation/CPD points",
                y: 32
  },
            {
                x: "Credit on 3rd party site",
                y: 32
  },
            {
                x: "Certificate from  journal",
                y: 81
  },
            {
                x: "Payment in-kind by the journal",
                y: 31
  },
            {
                x: "Cash payment",
                y: 39
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 15
  },
            {
                x: "Book discount",
                y: 36
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 46
  },
            {
                x: "Discount/waiver on publication charges",
                y: 36
  },
            {
                x: "Reviewer web badges ",
                y: 43
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 61
  },
            {
                x: "Personal access to journal content",
                y: 83
  },
            {
                x: "Reviewer of the year award",
                y: 50
  },
            {
                x: "'Top reviewer' web badges",
                y: 48
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 96
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 90
  },
            {
                x: "Visibility of other reviewer reports",
                y: 78
  },
            {
                x: "Review history metrics",
                y: 51
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 56
  }],
},
    {
        "key": "Corporation",
        "values": [
            {
                x: "Name published alongside paper",
                y: 10
  },
            {
                x: "Signed report publicized with paper",
                y: 4
  },
            {
                x: "Acknowledgement in the journal",
                y: 19
  },
            {
                x: "Acknowledgement on journal's website",
                y: 20
  },
            {
                x: "Thankyou note from editor",
                y: 17
  },
            {
                x: "CME Accreditation/CPD points",
                y: 7
  },
            {
                x: "Credit on 3rd party site",
                y: 10
  },
            {
                x: "Certificate from  journal",
                y: 24
  },
            {
                x: "Payment in-kind by the journal",
                y: 3
  },
            {
                x: "Cash payment",
                y: 8
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 3
  },
            {
                x: "Book discount",
                y: 9
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 8
  },
            {
                x: "Discount/waiver on publication charges",
                y: 9
  },
            {
                x: "Reviewer web badges ",
                y: 13
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 12
  },
            {
                x: "Personal access to journal content",
                y: 27
  },
            {
                x: "Reviewer of the year award",
                y: 11
  },
            {
                x: "'Top reviewer' web badges",
                y: 17
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 26
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 22
  },
            {
                x: "Visibility of other reviewer reports",
                y: 15
  },
            {
                x: "Review history metrics",
                y: 11
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 11
  }],
}
];

console.log(dataset);

nv.addGraph(function () {
    var chart = nv.models.multiBarHorizontalChart()
        .showControls(true) //Allow user to switch between 'Grouped' and 'Stacked' mode.
        .groupSpacing(0.2) //Distance between each group of bars.
        .color(["#F2BA49", "#855199", "#648FD8", "#92CB9C", "#D22938", "#075B81"])
        .height(900)
        .margin({
            top: 30,
            right: 20,
            bottom: 0,
            left: 280
        });

    chart.legend.vers('furious');

    //chart.xAxis
    //.tickFormat(d3.format(',f'));

    chart.yAxis
        .tickFormat(d3.format(',1f'))
        .axisLabel('Responses');

    d3.select('#chart1 svg')
        .datum(dataset)
        .call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
});