//data

var dataset = [
    {
        "key": "Europe",
        "values": [
            {
                x: "Name published alongside paper",
                y: 258
  },
            {
                x: "Signed report publicized with paper",
                y: 94
  },
            {
                x: "Acknowledgement in the journal",
                y: 524
  },
            {
                x: "Acknowledgement on journal's website",
                y: 468
  },
            {
                x: "Thankyou note from editor",
                y: 396
  },
            {
                x: "CME Accreditation/CPD points",
                y: 207
  },
            {
                x: "Credit on 3rd party site",
                y: 249
  },
            {
                x: "Certificate from  journal",
                y: 592
  },
            {
                x: "Payment in-kind by the journal",
                y: 195
  },
            {
                x: "Cash payment",
                y: 282
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 99
  },
            {
                x: "Book discount",
                y: 223
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 360
  },
            {
                x: "Discount/waiver on publication charges",
                y: 318
  },
            {
                x: "Reviewer web badges",
                y: 222
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 303
  },
            {
                x: "Personal access to journal content",
                y: 544
  },
            {
                x: "Reviewer of the year award",
                y: 341
  },
            {
                x: "'Top reviewer' web badges",
                y: 308
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 659
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 660
  },
            {
                x: "Visibility of other reviewer reports",
                y: 488
  },
            {
                x: "Review history metrics",
                y: 287
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 267
  }],
},
    {
        "key": "Asia",
        "values": [
            {
                x: "Name published alongside paper",
                y: 104
  },
            {
                x: "Signed report publicized with paper",
                y: 48
  },
            {
                x: "Acknowledgement in the journal",
                y: 204
  },
            {
                x: "Acknowledgement on journal's website",
                y: 204
  },
            {
                x: "Thankyou note from editor",
                y: 266
  },
            {
                x: "CME Accreditation/CPD points",
                y: 103
  },
            {
                x: "Credit on 3rd party site",
                y: 131
  },
            {
                x: "Certificate from  journal",
                y: 388
  },
            {
                x: "Payment in-kind by the journal",
                y: 87
  },
            {
                x: "Cash payment",
                y: 103
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 50
  },
            {
                x: "Book discount",
                y: 86
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 143
  },
            {
                x: "Discount/waiver on publication charges",
                y: 152
  },
            {
                x: "Reviewer web badges",
                y: 122
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 183
  },
            {
                x: "Personal access to journal content",
                y: 284
  },
            {
                x: "Reviewer of the year award",
                y: 300
  },
            {
                x: "'Top reviewer' web badges",
                y: 216
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 308
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 300
  },
            {
                x: "Visibility of other reviewer reports",
                y: 280
  },
            {
                x: "Review history metrics",
                y: 126
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 160
  }],
},
    {
        "key": "North America",
        "values": [
            {
                x: "Name published alongside paper",
                y: 91
  },
            {
                x: "Signed report publicized with paper",
                y: 29
  },
            {
                x: "Acknowledgement in the journal",
                y: 245
  },
            {
                x: "Acknowledgement on journal's website",
                y: 206
  },
            {
                x: "Thankyou note from editor",
                y: 156
  },
            {
                x: "CME Accreditation/CPD points",
                y: 92
  },
            {
                x: "Credit on 3rd party site",
                y: 97
  },
            {
                x: "Certificate from  journal",
                y: 178
  },
            {
                x: "Payment in-kind by the journal",
                y: 105
  },
            {
                x: "Cash payment",
                y: 158
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 54
  },
            {
                x: "Book discount",
                y: 97
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 154
  },
            {
                x: "Discount/waiver on publication charges",
                y: 122
  },
            {
                x: "Reviewer web badges",
                y: 96
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 110
  },
            {
                x: "Personal access to journal content",
                y: 189
  },
            {
                x: "Reviewer of the year award",
                y: 148
  },
            {
                x: "'Top reviewer' web badges",
                y: 110
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 256
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 286
  },
            {
                x: "Visibility of other reviewer reports",
                y: 184
  },
            {
                x: "Review history metrics",
                y: 111
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 121
  }],
},
    {
        "key": "Central & South America",
        "values": [
            {
                x: "Name published alongside paper",
                y: 42
  },
            {
                x: "Signed report publicized with paper",
                y: 21
  },
            {
                x: "Acknowledgement in the journal",
                y: 105
  },
            {
                x: "Acknowledgement on journal's website",
                y: 96
  },
            {
                x: "Thankyou note from editor",
                y: 111
  },
            {
                x: "CME Accreditation/CPD points",
                y: 21
  },
            {
                x: "Credit on 3rd party site",
                y: 44
  },
            {
                x: "Certificate from  journal",
                y: 178
  },
            {
                x: "Payment in-kind by the journal",
                y: 44
  },
            {
                x: "Cash payment",
                y: 60
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 27
  },
            {
                x: "Book discount",
                y: 56
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 72
  },
            {
                x: "Discount/waiver on publication charges",
                y: 82
  },
            {
                x: "Reviewer web badges",
                y: 54
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 85
  },
            {
                x: "Personal access to journal content",
                y: 157
  },
            {
                x: "Reviewer of the year award",
                y: 72
  },
            {
                x: "'Top reviewer' web badges",
                y: 96
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 152
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 153
  },
            {
                x: "Visibility of other reviewer reports",
                y: 95
  },
            {
                x: "Review history metrics",
                y: 77
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 71
  }],
},
    {
        "key": "Australasia",
        "values": [
            {
                x: "Name published alongside paper",
                y: 43
  },
            {
                x: "Signed report publicized with paper",
                y: 16
  },
            {
                x: "Acknowledgement in the journal",
                y: 105
  },
            {
                x: "Acknowledgement on journal's website",
                y: 94
  },
            {
                x: "Thankyou note from editor",
                y: 73
  },
            {
                x: "CME Accreditation/CPD points",
                y: 56
  },
            {
                x: "Credit on 3rd party site",
                y: 44
  },
            {
                x: "Certificate from  journal",
                y: 67
  },
            {
                x: "Payment in-kind by the journal",
                y: 36
  },
            {
                x: "Cash payment",
                y: 39
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 15
  },
            {
                x: "Book discount",
                y: 34
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 87
  },
            {
                x: "Discount/waiver on publication charges",
                y: 47
  },
            {
                x: "Reviewer web badges",
                y: 51
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 44
  },
            {
                x: "Personal access to journal content",
                y: 73
  },
            {
                x: "Reviewer of the year award",
                y: 53
  },
            {
                x: "'Top reviewer' web badges",
                y: 67
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 120
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 122
  },
            {
                x: "Visibility of other reviewer reports",
                y: 99
  },
            {
                x: "Review history metrics",
                y: 65
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 56
  }],
},
    {
        "key": "Africa & Middle East",
        "values": [
            {
                x: "Name published alongside paper",
                y: 54
  },
            {
                x: "Signed report publicized with paper",
                y: 21
  },
            {
                x: "Acknowledgement in the journal",
                y: 61
  },
            {
                x: "Acknowledgement on journal's website",
                y: 80
  },
            {
                x: "Thankyou note from editor",
                y: 82
  },
            {
                x: "CME Accreditation/CPD points",
                y: 31
  },
            {
                x: "Credit on 3rd party site",
                y: 38
  },
            {
                x: "Certificate from  journal",
                y: 129
  },
            {
                x: "Payment in-kind by the journal",
                y: 39
  },
            {
                x: "Cash payment",
                y: 51
  },
            {
                x: "Payment/credit by 3rd party review service",
                y: 22
  },
            {
                x: "Book discount",
                y: 30
  },
            {
                x: "Discount/waiver on Open Access fees",
                y: 47
  },
            {
                x: "Discount/waiver on publication charges",
                y: 34
  },
            {
                x: "Reviewer web badges",
                y: 37
  },
            {
                x: "Post-pub access to papers reviewed",
                y: 56
  },
            {
                x: "Personal access to journal content",
                y: 95
  },
            {
                x: "Reviewer of the year award",
                y: 87
  },
            {
                x: "'Top reviewer' web badges",
                y: 75
  },
            {
                x: "Ed. Feedback on quality of review",
                y: 102
  },
            {
                x: "Info on final decision for reviewed paper",
                y: 75
  },
            {
                x: "Visibility of other reviewer reports",
                y: 84
  },
            {
                x: "Review history metrics",
                y: 59
  },
            {
                x: "Post-pub metrics for reviewed articles",
                y: 48
  }],
}
];

console.log(dataset);

nv.addGraph(function () {
    var chart = nv.models.multiBarHorizontalChart()
        .showControls(true) //Allow user to switch between 'Grouped' and 'Stacked' mode.
        .groupSpacing(0.2) //Distance between each group of bars.
        .color(["#F2BA49", "#855199", "#648FD8", "#92CB9C", "#D22938", "#075B81"])
        .height(900)
        .margin({
            top: 30,
            right: 20,
            bottom: 0,
            left: 280
        });

    chart.legend.vers('furious');

    //chart.xAxis
    //.tickFormat(d3.format(',f'));

    chart.yAxis
        .tickFormat(d3.format(',1f'))
        .axisLabel('Responses');

    d3.select('#chart1 svg')
        .datum(dataset)
        .call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
});